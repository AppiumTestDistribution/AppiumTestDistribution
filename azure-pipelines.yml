# Xcode
# Build, test, and archive an Xcode workspace on macOS.
# Add steps that install certificates, test, sign, and distribute an app, save build artifacts, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/xcode

jobs:
  - job: CheckStyle
    pool:
      vmImage: 'macos-10.15'

    steps:
      - task: NodeTool@0
        inputs:
          versionSpec: '12.18.1'

      - script: |
          mvn clean install -Dmaven.test.skip=true -Dgpg.skip

        displayName: 'Checkstyle'

  - job: Distribute
    pool:
      vmImage: 'windows-latest'

    steps:
    - task: NodeTool@0
      inputs:
        versionSpec: '12.18.1'

    - script: |
         node -v
         npm install -g appium
         appium -v
      displayName: 'Install Appium'

    - script: |
         mvn clean -Dtest=Runner test -Dcheckstyle.skip -DPlatform="windows"

      displayName: 'Run Distribute on iOS and Android'

